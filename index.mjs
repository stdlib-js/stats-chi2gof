// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-utils-absolute-difference@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-sqrt-eps@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-chisquare-cdf@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-base-daxpy@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-base-dscal@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-dsumpw@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-bernoulli-pmf@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-binomial-pmf@esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-discrete-uniform-pmf@esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-geometric-pmf@esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-hypergeometric-pmf@esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-negative-binomial-pmf@esm/index.mjs";import O from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-poisson-pmf@esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-incrspace@esm/index.mjs";import V from"https://cdn.jsdelivr.net/gh/stdlib-js/random-sample@esm/index.mjs";import P from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-dfill@esm/index.mjs";import q from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";import A from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import F from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@esm/index.mjs";var S={alpha:.05,ddof:0,simulate:!1,iterations:500};var I=function(){return{alpha:S.alpha,ddof:S.ddof,simulate:S.simulate,iterations:S.iterations}},N=t.isPrimitive,R=u.isPrimitive,k=c.isPrimitive,z=i.isPrimitive,C=b,D=l,G=g,H=m;var J=function(t,s){if(!C(s))return new TypeError(H("0dO2h",s));if(G(s,"alpha")){if(t.alpha=s.alpha,!z(t.alpha)||D(t.alpha))return new TypeError(H("0dO8h","alpha",t.alpha));if(t.alpha<0||t.alpha>1)return new RangeError(H("0dOA1","alpha",t.alpha))}return G(s,"ddof")&&(t.ddof=s.ddof,!N(t.ddof))?new TypeError(H("0dO35","ddof",t.ddof)):G(s,"iterations")&&(t.iterations=s.iterations,!R(t.iterations))?new TypeError(H("0dO3b","iterations",t.iterations)):G(s,"simulate")&&(t.simulate=s.simulate,!k(t.simulate))?new TypeError(H("0dO30","simulate",t.simulate)):null},K=g,M=m,B={bernoulli:v,binomial:w,"discrete-uniform":x,geometric:y,hypergeometric:E,"negative-binomial":_,poisson:O};var L=function(t){return K(B,t)?B[t]:new Error(M("0dO9v",t))},Q=d;var U=function(t,s,e,i,r){var n,o,d,a,m;for(n=0,m=0;m<t;m++){if(o=s[m*e],0===(d=i[m*r])){if(0===o)continue;return Q}n+=(a=o-d)*a/d}return n};var W=T,X=V,Y=j,Z=P,$=function(t,s,e,i,r){var n;for(n=0;n<t;n++)i[s[n*e]*r]+=1;return i},tt=U;var st=function(t,s,e,i,r,n){var o,d,a,m,l,p;for(o=W(0,t,1),d={size:r,probs:e},a=new Y(t),m=1,p=0;p<n;p++)l=X(o,d),a=$(t,l,1,a,1),tt(t,a,1,s,1)>=i&&(m+=1),p<n-1&&Z(t,0,a,1);return m/(n+1)},et=u,it=b,rt=c.isPrimitive,nt=g,ot=q,dt=A,at=F,mt=m;function lt(t,s,e,i){return this instanceof lt?(this._pValue=t,this._alpha=s,this._statistic=e,this._df=i,this):new lt(t,s,e,i)}at(lt.prototype,"alpha",(function(){return this._alpha})),at(lt.prototype,"df",(function(){return this._df})),dt(lt.prototype,"method","Chi-square goodness-of-fit test"),at(lt.prototype,"pValue",(function(){return this._pValue})),at(lt.prototype,"rejected",(function(){return this._pValue<=this._alpha})),at(lt.prototype,"statistic",(function(){return this._statistic})),dt(lt.prototype,"toString",(function(t){var s,e,i;if(e=4,s=!0,arguments.length>0){if(!it(t))throw new TypeError(mt("0dO4K",t));if(nt(t,"digits")){if(!et(t.digits))throw new TypeError(mt("0dO3b","digits",t.digits));e=t.digits}if(nt(t,"decision")){if(!rt(t.decision))throw new TypeError(mt("0dO30","decision",t.decision));s=t.decision}}return i=[this.method,"","","Null hypothesis: population probabilities are equal to those in p","","","    pValue: "+ot(this._pValue,-e),"    statistic: "+ot(this._statistic,-e),"    degrees of freedom: "+this._df,""],s&&(i.push("Test Decision: "+(this.rejected?"Reject":"Fail to reject")+" null in favor of alternative at "+100*this._alpha+"% significance level"),i.push("")),i.join("\n")})),dt(lt.prototype,"toJSON",(function(){return{rejected:this.rejected,alpha:this._alpha,pValue:this._pValue,df:this._df,statistic:this._statistic,method:this.method}}));var pt=lt,ht=t.isPrimitive,ft=s,jt=e,ut=i.isPrimitive,ct=r.isPrimitive,bt=n,gt=o,vt=d,wt=a,xt=m,yt=l,Et=p,_t=h,Ot=f,Tt=j,Vt=I,Pt=J,qt=L,At=U,Ft=st,St=pt;var It=function(t,s){var e,i,r,n,o,d,a,m,l,p,h,f,j,u,c,b,g,v,w;if(jt(t)&&1===t.ndims&&1===t.strides.length)j=t.data,u=t.strides[0],c=t.offset;else{if(!ft(t))throw new TypeError(xt("0dO3f",t));j=t,u=1,c=0}for(f=t.length,a=new Tt(f+1),b=0,w=0;w<f;w++){if(v=j[c+u*w],!ht(v))throw new TypeError(xt("invalid argument. First argument must contain nonnegative integers. Index: `%u`. Value: `%s`.",w,v));a[w]=v,b+=v}if(0===b)throw new Error(xt("0dO1G"));if(i=0,ct(s)){if((l=qt(s))instanceof Error)throw l;for(i+=l.length-1,r=[0],w=0;w<i;w++){if(!ut(v=arguments[w+2])||yt(v))throw new TypeError(xt("invalid argument. Probability mass function (PMF) arguments must be numbers. Argument: `%f`. Value: `%s`.",w+2,v));r.push(v)}for(e=new Tt(f+1),p=0,w=0;w<f;w++)r[0]=w,"discrete-uniform"===s&&(r[0]+=r[1]),p+=v=l.apply(null,r),e[w]=v*b;p<1&&(e[f]=(1-p)*b,f+=1)}else{if(jt(s)&&1===s.ndims&&1===s.strides.length)j=s.data,u=s.strides[0],c=s.offset;else{if(!ft(s))throw new TypeError(xt("0dO9y",s));j=s,u=1,c=0}if(s.length!==f)throw new Error(xt("0dO1H"));for(e=new Tt(f),p=0,w=0;w<f;w++){if(v=j[c+u*w],!ut(v))throw new TypeError(xt("invalid argument. Second argument must only contain numbers. Index: `%u`. Value: `%s`.",w,v));if(v<0)throw new TypeError(xt("0dOA0",w,v));p+=v>1?vt:v,e[w]=v}bt(p,1)<=gt&&(g=s,e=_t(f,b,e,1))}if(n=Vt(),arguments.length>2+i&&(m=Pt(n,arguments[2+i])))throw m;return d=At(f,a,1,e,1),n.simulate?(void 0===g&&(v=Ot(f,e,1),g=Et(f,1/v,e,1,new Tt(f),1)),o=Ft(f,e,g,d,b,n.iterations)):(h=f-1-n.ddof,o=1-wt(d,h)),new St(o,n.alpha,d,void 0===h?null:h)},Nt=It;export{Nt as default};
//# sourceMappingURL=index.mjs.map
